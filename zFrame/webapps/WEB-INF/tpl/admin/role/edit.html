<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>编辑角色</title>
</head>
  <body>
  <script type="text/javascript">
  		var winEdit = new Windows("role_edit");
  		$(function(){
  			winEdit.find('#roleForm').form({   
			    url:'$!basePath/admin/role/doEdit',   
			    onSubmit: function(){
			    	var pass = winEdit.find('#roleForm').form("validate");
			    	if(pass){
			    		winEdit.find("#ok").linkbutton("disable");
			    	}
			    	return pass; 
			    },   
			    success:function(data){
			   		var result = jQuery.parseJSON(data);   
			        if(result.isEdited){
			        	top.Notiy.success("修改成功!");
		        		winEdit.setReturnValue(true);
						winEdit.close();
			        }else if(result.NoChanges){
			        	top.Notiy.info("您未做任何修改!");
			        	winEdit.setReturnValue(false);
						winEdit.close();
			        }else{
			        	top.Dialog.alert("提示",result.error,"error");
			        }
			        winEdit.find("#ok").linkbutton("enable");
			    }
			}); 
			
  		});
		function ok(){
			winEdit.find('#roleForm').submit();
		}
		function cancel(){
			winEdit.close();
		}
	</script>
    <div class="easyui-layout" data-options="fit:true">
			<div data-options="region:'center',border:false" style="background:#fff;">
				<form id="roleForm" method="post" style="padding-top:10px;padding-left:20px;">
				<input type="hidden" name="id" value="$!role.id"/>
				<table width="90%">
					<tr>
						<td>名称：</td>
						<td>
						<input class="easyui-validatebox" type="text" name="name" value="$!role.name" maxlength="20" data-options="required:true,validType:'minLength[2]'" style="width:180px;" #if(!$!isEditEnabled)disabled="disabled"#end/>  
						</td>
					</tr>
					<tr>
						<td>类型</td>
						<td colspan="3">
							<select class="easyui-combobox" name="type" data-options="editable:false,width:193" #if(!$!isEditEnabled)disabled="disabled"#end>
								<option value="GENERAL">普通角色</option>
								<option value="SYSTEM">系统角色</option>
							</select>
							#setSelectValue("role_edit","type","$!role.type")
						</td>
					</tr>
					<tr>
						<td>描述：</td>
						<td colspan="3">
							<textarea rows="3" style="width:190px;" name="descript">$!role.descript</textarea>
						</td>
					</tr>
					<tr>
						<td>是否启用：</td>
						<td colspan="3">
							#if($!isEditEnabled)
								<label>启用</label>
								<input type="radio" name="enabled" value="0"/>
								<label>不启用</label>
								<input type="radio" name="enabled" value="1"/>
							#setRadioValue("role_edit","enabled","$!role.enabled")
							#else
								<input type="hidden" name="enabled" value="0"/>
								<span style="color:red">注:系统关键角色始终启用</span>
							#end
						</td>
					</tr>
				</table>
				</form>
			</div>
			<div data-options="region:'south',border:false" style="text-align:center;padding:5px 0;">
				<a id="ok" class="easyui-linkbutton" data-options="iconCls:'icon-ok'" href="javascript:void(0)" onclick="ok()">确定</a>
				<a id="cancel" class="easyui-linkbutton" data-options="iconCls:'icon-cancel'" href="javascript:void(0)" onclick="cancel()">取消</a>
			</div>
		</div>
  </body>
</html>
